(window.webpackJsonp=window.webpackJsonp||[]).push([[158],{531:function(s,t,a){"use strict";a.r(t);var n=a(10),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("blockquote",[a("p",[s._v("专栏原创出处："),a("a",{attrs:{href:"https://github.com/GourdErwa/review-notes/tree/master/language/java-core",target:"_blank",rel:"noopener noreferrer"}},[s._v("github-源笔记文件 "),a("OutboundLink")],1),s._v(" ，"),a("a",{attrs:{href:"https://github.com/GourdErwa/java-advanced/tree/master/java-core",target:"_blank",rel:"noopener noreferrer"}},[s._v("github-源码 "),a("OutboundLink")],1),s._v("，欢迎 Star，转载请附上原文出处链接和本声明。")])]),s._v(" "),a("p",[s._v("Java 核心知识专栏系列笔记，系统性学习可访问个人复盘笔记-技术博客 "),a("a",{attrs:{href:"https://review-notes.top/language/java-core/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Java 核心知识 "),a("OutboundLink")],1)]),s._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#一、关于值传递引用传递的结论"}},[s._v("一、关于值传递引用传递的结论")])]),a("li",[a("a",{attrs:{href:"#二、引用类型作为方法参数"}},[s._v("二、引用类型作为方法参数")])]),a("li",[a("a",{attrs:{href:"#三、基础数据类型作为方法参数"}},[s._v("三、基础数据类型作为方法参数")])]),a("li",[a("a",{attrs:{href:"#总结"}},[s._v("总结")])]),a("li",[a("a",{attrs:{href:"#专栏更多文章笔记"}},[s._v("专栏更多文章笔记")])])])]),a("p"),s._v(" "),a("h2",{attrs:{id:"一、关于值传递引用传递的结论"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、关于值传递引用传递的结论"}},[s._v("#")]),s._v(" 一、关于值传递引用传递的结论")]),s._v(" "),a("p",[s._v("公网上流传的绝大多数文章都是在研究「Java 到底是值传递还是引用传递」。并且一致认为是值传递，但是证明的过程并没有充分的理由。")]),s._v(" "),a("p",[s._v("虽然最终大部分人“证明”是值传递，那么为什么是值传递，值是什么？怎么传递的？修改这个值以后为什么不会改变原始值（方法参数）？")]),s._v(" "),a("p",[a("strong",[s._v("先下结论")])]),s._v(" "),a("p",[s._v("在此总结一下个人的理解，后续以字节码的分析进行说明。")]),s._v(" "),a("p",[s._v("———— 所谓的传递是 "),a("strong",[s._v("拷贝了")]),s._v(" 对象的引用指针地址或者基本类型的值到栈帧的局部变量表中")]),s._v(" "),a("ul",[a("li",[s._v("如果方法中没有重新赋值操作，一直操作的是方法参数的数据。")]),s._v(" "),a("li",[s._v("如果进行了重新赋值操作 ("),a("code",[s._v("参数名称 = 新的数据")]),s._v(")，相当于把拷贝在局部变量表内的数据替换了。")])]),s._v(" "),a("blockquote",[a("p",[s._v("该部分研究需要虚拟机相关知识，尤其是栈帧，方法的调用过程，字节码指令。")]),s._v(" "),a("p",[s._v("相关知识可以从 "),a("a",{attrs:{href:"https://blog.csdn.net/xiaohulunb/article/details/103828570",target:"_blank",rel:"noopener noreferrer"}},[s._v("Java JVM（JDK13）-专栏文章目录汇总 "),a("OutboundLink")],1),s._v(" 了解。")])]),s._v(" "),a("p",[a("strong",[s._v("局部变量表简介")])]),s._v(" "),a("p",[s._v("方法执行时，传入的方法参数与方法内部创建的变量都保存在栈帧的局部变量表中，每个槽位保存一个变量，对应的名字是惟一的。")]),s._v(" "),a("p",[s._v("因为类实例方法隐式的会传入一个 this 引用（方法参数的第 0 个位置），所以包含 N 个参数的方法槽位内容一般是：")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("第 0 个槽位：隐式传入的 this 对象引用\n第 1 个槽位：方法的第 1 个参数\n第 2 个槽位：方法的第 2 个参数\n第 3 个槽位：方法的第 3 个参数\n第 N 个槽位：方法的第 n 个参数\n\n第 N+1 个槽位：方法内部声明的第 1 个变量\n第 N+2 个槽位：方法内部声明的第 2 个变量\n第 N+3 个槽位：方法内部声明的第 3 个变量\n...\n")])])]),a("p",[s._v("举个例子，我们的方法及注释如下")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 槽位 0:this，槽位 1:o 的对象的引用指针，假设地址为 x011")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("refUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n    \n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 生成新对象的引用地址假设为 x012 ，重新赋值名称为 o 的局部变量，此时直接覆盖槽位 1 的对象的引用指针地址（重点！！！） ")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// x011 被替换为 x012")]),s._v("\n   o "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("        \n   \n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 后续我们操作的都是新创建的对象引用 x012，方法传入的 o 无法使用了")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" hashCode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("hashCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h2",{attrs:{id:"二、引用类型作为方法参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、引用类型作为方法参数"}},[s._v("#")]),s._v(" 二、引用类型作为方法参数")]),s._v(" "),a("ol",[a("li",[s._v("我们以下面代码块中 refOriginal 方法进行字节码分析。")])]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("refOriginal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 不改变方法参数的引用")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    字节码"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将局部变量表槽位 1 压入栈顶（方法参数 o）")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" areturn "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将栈顶数据返回")]),s._v("\n      局部变量表"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Start")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Length")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Slot")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Name")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Signature")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LPassByRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 槽位 0，当前对象引用 this")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("     o   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Ljava")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 槽位 1，方法的第一个 Object 参数 o")]),s._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("我们以下面代码块中 refUpdate 方法进行字节码分析。（重点理解: "),a("code",[s._v("7: astore_1")]),s._v("）")])]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("refUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 改变方法参数的引用")]),s._v("\n        o "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" hashCode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("hashCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    字节码"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v("           #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 创建一个 Object 对象引用并压入栈顶")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" dup              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 复制 Object 对象引用并压入栈顶")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" invokespecial #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 调用 Object 构造方法，使用一个引用")]),s._v("\n\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" astore_1         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 因为赋值操作 o = new Object() ，赋值的符号名称和方法参数都是 o ，")]),s._v("\n                             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 所以将新创建对象的引用放入槽位 1（相当于替换了方法参数的 o）")]),s._v("\n\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_1          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将 o 引用压入栈顶，准备调用 hashCode 方法")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" invokevirtual #"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 调用 hashCode 方法返回 int 值")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" istore_2         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将 int 值放入局部变量表中，槽位为 2，名称为 hashCode ")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_1          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将 o 引用压入栈顶，准备返回")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" areturn          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 返回 o 引用")]),s._v("\n      局部变量表"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Start")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Length")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Slot")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Name")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Signature")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LPassByRef")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 槽位 0，当前对象引用 this")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("     o   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Ljava")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lang"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 槽位 1，方法的第一个 Object 参数 o")]),s._v("\n           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" hashCode   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("I")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 槽位 2，hashCode int 值")]),s._v("\n")])])]),a("h2",{attrs:{id:"三、基础数据类型作为方法参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、基础数据类型作为方法参数"}},[s._v("#")]),s._v(" 三、基础数据类型作为方法参数")]),s._v(" "),a("ol",[a("li",[s._v("我们以下面代码块中 intOriginal 方法进行字节码分析。")])]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("intOriginal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 不改变方法参数基础数据的值")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    字节码"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" iload_1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将局部变量表槽位 1 压入栈顶（方法 int 参数 o）")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ireturn "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将栈顶数据返回")]),s._v("\n      局部变量表"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Start")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Length")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Slot")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Name")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Signature")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LPassByValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// this")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("     o   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("I")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 槽位 1，方法的第一个 int 参数 o")]),s._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("我们以下面代码块中 intUpdate 方法进行字节码分析。（重点理解: "),a("code",[s._v("4: istore_1")]),s._v("）")])]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("intUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 改变方法参数基础数据的值")]),s._v("\n        o "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" o "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    字节码"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" iload_1     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将局部变量表槽位 1 压入栈顶（方法 int 参数 o）")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" bipush  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将 10 压入栈顶")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" iadd        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将栈顶的 2 个数出栈相加后压入栈顶")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" istore_1    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将相加的结果放入槽位 1（int 参数 o）")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" iload_1     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将槽位 1（int 参数 o）出栈，准备返回")]),s._v("\n         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ireturn     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将栈顶数据返回")]),s._v("\n      局部变量表"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Start")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Length")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Slot")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Name")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Signature")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LPassByValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// this")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("     o   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("I")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 槽位 1，方法的第一个 int 参数 o")]),s._v("\n")])])]),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),a("p",[s._v("通过字节码的分析我们明确了方法调用及方法参数在方法内部的作用过程。")]),s._v(" "),a("p",[a("strong",[s._v("方法调用时，拷贝一份方法参数的引用指针地址或基本数据到局部变量的槽位中，重新赋值就会替换对应槽位的数据。")])]),s._v(" "),a("p",[s._v("其中对字节码的分析可参考 "),a("a",{attrs:{href:"https://blog.csdn.net/xiaohulunb/article/details/103828570",target:"_blank",rel:"noopener noreferrer"}},[s._v("Java JVM（JDK13）-专栏文章目录汇总 "),a("OutboundLink")],1),s._v("，\n比如为什么 new 指令后跟随着一个 dup 指令，如果创建对象后不赋值怎么处理（类似匿名类） ？")]),s._v(" "),a("h2",{attrs:{id:"专栏更多文章笔记"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#专栏更多文章笔记"}},[s._v("#")]),s._v(" 专栏更多文章笔记")]),s._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://gourderwa.blog.csdn.net/article/details/104020339",target:"_blank",rel:"noopener noreferrer"}},[s._v("Java 核心知识-专栏文章目录汇总 "),a("OutboundLink")],1)])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://blog.csdn.net/xiaohulunb/article/details/103594468",target:"_blank",rel:"noopener noreferrer"}},[s._v("Java 并发编程-专栏文章目录汇总 "),a("OutboundLink")],1)])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://blog.csdn.net/xiaohulunb/article/details/103828570",target:"_blank",rel:"noopener noreferrer"}},[s._v("Java JVM（JDK13）-专栏文章目录汇总 "),a("OutboundLink")],1)])])])])}),[],!1,null,null,null);t.default=e.exports}}]);